# Dockerfile for Supabase Database Initialization Job
FROM postgres:15-alpine

# Install bash for the initialization script
RUN apk add --no-cache bash

# Copy initialization files
COPY db-init/init-db.sql /app/init-db.sql
COPY scripts/run-db-init.sh /app/run-db-init.sh

# Make the script executable
RUN chmod +x /app/run-db-init.sh

# Set working directory
WORKDIR /app

# Run the initialization script
CMD ["/app/run-db-init.sh"]
